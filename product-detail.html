<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chi tiết sản phẩm - Shop Eirlyst</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="product-detail.css" />
    <script src="cart.js"></script>
  </head>
  <body>
    <!-- Modal Overlay -->
    <div class="modal-overlay">
      <!-- Modal Container -->
      <div class="modal-container">
        <!-- Close Button -->
        <button class="close-btn" onclick="goBackToProducts()">
          <i class="fas fa-times"></i>
        </button>

        <!-- Hotline Header -->
        <div class="hotline-header">
          HOTLINE ĐẶT HOA NHANH - TP HCM: 1900 633 045 - HÀ NỘI: 094 200 7921
        </div>

        <!-- Main Container -->
        <div class="container">
          <div class="product-detail">
            <!-- Product Image -->
            <div class="product-image-section">
              <img id="productImage" src="" alt="" class="main-image" />
            </div>

            <!-- Product Info -->
            <div class="product-info">
              <h1 id="productTitle" class="product-title">Ấm Sao</h1>
              <div id="productPrice" class="product-price">790,000VND</div>
              <div class="vat-note">Giá đã bao gồm 8% VAT</div>

              <!-- Promotions Section -->
              <div class="promotions-section">
                <div class="promo-label">Khuyến mãi:</div>
                <div class="promo-tags">
                  <span class="promo-tag">Giảm 50K</span>
                  <span class="promo-tag">Giảm 25K</span>
                  <span class="promo-tag">Giảm 10%</span>
                </div>
              </div>

              <!-- Services Section -->
              <div class="services-section">
                <div class="service-item">
                  <div class="service-icon">
                    <i class="fas fa-truck"></i>
                  </div>
                  <div class="service-text">
                    <div class="service-title">Giao hoa</div>
                    <div class="service-subtitle">MIỄN PHÍ</div>
                  </div>
                </div>
                <div class="service-item">
                  <div class="service-icon">
                    <i class="fas fa-heart"></i>
                  </div>
                  <div class="service-text">
                    <div class="service-title">Tặng kèm</div>
                    <div class="service-subtitle">THIỆP</div>
                  </div>
                </div>
                <div class="service-item">
                  <div class="service-icon">
                    <i class="fas fa-clock"></i>
                  </div>
                  <div class="service-text">
                    <div class="service-title">Giao nhanh</div>
                    <div class="service-subtitle">60 PHÚT</div>
                  </div>
                </div>
              </div>

              <!-- Purchase Section -->
              <div class="purchase-section">
                <div class="quantity-section">
                  <div class="quantity-label">Số lượng</div>
                  <div class="quantity-controls">
                    <button class="qty-btn" onclick="changeQuantity(-1)">
                      -
                    </button>
                    <span class="quantity-display" id="quantity">1</span>
                    <button class="qty-btn" onclick="changeQuantity(1)">
                      +
                    </button>
                  </div>
                </div>

                <button class="main-order-btn" onclick="orderNow()">
                  <i class="fas fa-shopping-cart"></i>
                  ĐẶT HOA NGAY
                </button>
                <div class="contact-buttons">
                  <button class="contact-btn contact-phone">
                    <i class="fas fa-phone"></i>
                    Đặt nhanh
                  </button>
                  <button class="contact-btn contact-zalo">
                    <i class="fab fa-facebook-messenger"></i>
                    Zalo QA
                  </button>
                  <button class="contact-btn contact-facebook">
                    <i class="fab fa-facebook-messenger"></i>
                    Facebook
                  </button>
                </div>
                <!-- Contact Buttons -->
              </div>
            </div>
          </div>
        </div>

        <!-- Detailed Product Description -->
        <div class="container">
          <div class="detailed-description">
            <h2>Mô tả chi tiết sản phẩm</h2>
            <div id="detailedContent">
              <!-- Các block mô tả đầy đủ cho từng sản phẩm. include.js sẽ chọn block theo data-name -->
              <div class="detail-item" data-name="Ấm Sao">
                <p>
                  <strong>Bó hoa "Ấm Sao"</strong> là một tác phẩm nghệ thuật
                  được tạo nên từ những bông hoa hồng tươi thắm nhất, mang đến
                  vẻ đẹp tinh tế và sang trọng cho người nhận.
                </p>

                <h3>Đặc điểm nổi bật:</h3>
                <ul>
                  <li>
                    <strong>Hoa hồng cao cấp:</strong> Sử dụng 30-35 bông hoa
                    hồng tươi nhập khẩu từ Đà Lạt, được chọn lọc kỹ càng
                  </li>
                  <li>
                    <strong>Màu sắc nhẹ nhàng:</strong> Tông màu hồng pastel kết
                    hợp trắng tinh khôi tạo nên vẻ đẹp dịu dàng
                  </li>
                  <li>
                    <strong>Lá phụ tự nhiên:</strong> Eucalyptus và baby breath
                    tạo điểm nhấn tinh tế và thơm mát
                  </li>
                  <li>
                    <strong>Gói hoa đẹp mắt:</strong> Giấy gói cao cấp màu trắng
                    với ruy băng hồng sang trọng
                  </li>
                  <li>
                    <strong>Kích thước:</strong> Cao 50cm, đường kính 35cm -
                    kích thước hoàn hảo để thể hiện tình cảm
                  </li>
                  <li>
                    <strong>Thời gian tươi:</strong> 7-10 ngày nếu chăm sóc đúng
                    cách
                  </li>
                </ul>

                <h3>Ý nghĩa và phù hợp cho:</h3>
                <p>
                  Bó hoa "Ấm Sao" mang trong mình thông điệp về tình yêu ấm áp
                  và sự quan tâm chân thành. Thích hợp cho sinh nhật, kỷ niệm,
                  lễ tỏ tình hoặc làm quà tặng trang trọng.
                </p>

                <h3>Hướng dẫn chăm sóc:</h3>
                <ul>
                  <li>Cắt chéo cuống hoa dưới vòi nước chảy ngay khi nhận</li>
                  <li>Đặt hoa trong bình nước sạch, thay nước 2-3 ngày/lần</li>
                  <li>Tránh ánh nắng trực tiếp và gió mạnh</li>
                  <li>
                    Cắt bỏ những bông hoa đã héo để giữ độ tươi cho những bông
                    khác
                  </li>
                </ul>
                <p class="note">
                  <em
                    ><strong>Lưu ý:</strong> Màu sắc và số lượng hoa có thể thay
                    đổi nhẹ tùy theo mùa vụ; chúng tôi cam kết giữ thẩm mỹ và
                    chất lượng.</em
                  >
                </p>
              </div>

              <div class="detail-item" data-name="Little Love">
                <p>
                  <strong>Little Love</strong> là bó hoa nhỏ xinh, được thiết kế
                  để truyền tải thông điệp yêu thương một cách tinh tế và chân
                  thành. Thành phần chính gồm hoa mini (hoa hồng hoặc hoa cúc
                  nhỏ), filler nhẹ và dây ruy băng trang trí.
                </p>

                <h3>Đặc điểm nổi bật:</h3>
                <ul>
                  <li>
                    Thiết kế gọn, dễ cầm, phù hợp để tặng kèm thiệp, quà nhỏ.
                  </li>
                  <li>
                    Sử dụng hoa mini, tông màu pastel hoặc đỏ nhung tùy chọn.
                  </li>
                  <li>
                    Phù hợp tặng trong dịp hẹn hò, sinh nhật nhỏ, hoặc làm quà
                    cảm ơn.
                  </li>
                </ul>

                <h3>Ý nghĩa và phù hợp cho:</h3>
                <p>
                  Little Love tượng trưng cho tình cảm ngọt ngào và quan tâm vô
                  điều kiện — phù hợp để bày tỏ cảm xúc nhẹ nhàng mà vẫn đầy ấm
                  áp.
                </p>

                <h3>Hướng dẫn chăm sóc:</h3>
                <ul>
                  <li>
                    Cắt chéo cuống hoa khoảng 1-2 cm trước khi cắm vào nước.
                  </li>
                  <li>Thay nước mỗi 2 ngày, giữ nơi mát, tránh nắng gắt.</li>
                  <li>Loại bỏ lá bị hư để tránh ô nhiễm nước.</li>
                </ul>

                <p class="note">
                  <em
                    ><strong>Lưu ý:</strong> Do kích thước nhỏ, Little Love phù
                    hợp làm quà cá nhân; nếu cần trang trọng hơn, vui lòng chọn
                    mẫu kích thước lớn hơn.</em
                  >
                </p>
              </div>

              <div class="detail-item" data-name="Ngọt Ngào">
                <p>
                  <strong>Ngọt Ngào</strong> là bó hoa với palette màu pastel
                  nhẹ nhàng, được kết hợp khéo léo giữa hoa hồng, baby breath và
                  lá xanh tạo cảm giác ấm áp, dịu dàng.
                </p>

                <h3>Đặc điểm nổi bật:</h3>
                <ul>
                  <li>Màu pastel tinh tế, phù hợp cho thông điệp lãng mạn.</li>
                  <li>
                    Thiết kế cân đối, có thể đặt trên bàn làm việc hoặc dùng làm
                    quà.
                  </li>
                  <li>
                    Phối hợp các phụ liệu nhẹ nhàng như ruy băng vải và giấy gói
                    cao cấp.
                  </li>
                </ul>

                <h3>Ý nghĩa và phù hợp cho:</h3>
                <p>
                  Ngọt Ngào thích hợp làm quà mừng kỷ niệm, Valentine, hoặc tặng
                  khi muốn gửi một lời chúc ấm áp, nhẹ nhàng.
                </p>

                <h3>Hướng dẫn chăm sóc:</h3>
                <ul>
                  <li>Đặt nơi thoáng mát, tránh ánh nắng trực tiếp.</li>
                  <li>
                    Thay nước và cắt cuống 2 ngày/lần để kéo dài tuổi thọ.
                  </li>
                </ul>

                <p class="note">
                  <em
                    ><strong>Lưu ý:</strong> Một số hoa pastel nhạy cảm với
                    nhiệt độ cao — bảo quản nơi mát để giữ màu sắc đẹp.</em
                  >
                </p>
              </div>

              <div class="detail-item" data-name="100 Ngày Yêu">
                <p>
                  <strong>100 Ngày Yêu</strong> là thiết kế quy mô, mang phong
                  cách sang trọng, thường sử dụng kết hợp nhiều dòng hoa cao cấp
                  để tạo điểm nhấn và thể hiện chiều sâu cảm xúc.
                </p>

                <h3>Đặc điểm nổi bật:</h3>
                <ul>
                  <li>
                    Thành phần đa dạng: hoa hồng, lan, baby breath và lá phụ cao
                    cấp.
                  </li>
                  <li>
                    Kích thước lớn, phù hợp làm quà kỷ niệm hoặc trang trí sự
                    kiện.
                  </li>
                  <li>Gói hoa cầu kỳ, sử dụng giấy và ruy băng cao cấp.</li>
                </ul>

                <h3>Ý nghĩa và phù hợp cho:</h3>
                <p>
                  Mẫu này phù hợp để kỷ niệm mốc quan trọng trong mối quan hệ,
                  làm quà tặng trong lễ kỷ niệm hoặc các dịp cần sự trang trọng.
                </p>

                <h3>Hướng dẫn chăm sóc:</h3>
                <ul>
                  <li>Đặt ở nơi mát, tránh gió mạnh và ánh nắng trực tiếp.</li>
                  <li>Thay nước hàng ngày cho các bó lớn để tránh hư nước.</li>
                  <li>
                    Kiểm tra và cắt tỉa những cành/lá bị hư để duy trì vẻ đẹp.
                  </li>
                </ul>

                <p class="note">
                  <em
                    ><strong>Lưu ý:</strong> Vì kích thước lớn, 100 Ngày Yêu
                    thường vận chuyển theo đơn đặt trước để đảm bảo chất lượng
                    khi đến tay khách hàng.</em
                  >
                </p>
              </div>

              <div class="detail-item" data-name="Bó Hoa Bright Pink">
                <p>
                  <strong>Bó Hoa Bright Pink</strong> gây ấn tượng mạnh bằng sắc
                  hồng rực rỡ, phù hợp cho người trẻ, sự kiện vui nhộn hoặc tặng
                  khi muốn tạo điểm nhấn màu sắc.
                </p>

                <h3>Đặc điểm nổi bật:</h3>
                <ul>
                  <li>
                    Màu hồng tươi nổi bật, làm nổi bật không gian trưng bày.
                  </li>
                  <li>
                    Phong cách hiện đại, thường dùng hoa hồng, tulip hoặc
                    lisiantus.
                  </li>
                </ul>

                <h3>Ý nghĩa và phù hợp cho:</h3>
                <p>
                  Bright Pink truyền tải thông điệp năng lượng, niềm vui và sự
                  tươi mới — phù hợp tặng cho bạn bè, đồng nghiệp, hoặc dịp khai
                  trương, sinh nhật trẻ trung.
                </p>

                <h3>Hướng dẫn chăm sóc:</h3>
                <ul>
                  <li>Không để dưới ánh nắng mạnh; giữ nơi thoáng mát.</li>
                  <li>
                    Thay nước 2 ngày/lần; cắt chéo cuống để hút nước tốt hơn.
                  </li>
                </ul>

                <p class="note">
                  <em
                    ><strong>Lưu ý:</strong> Màu sắc rực rỡ có thể phai bớt
                    trong điều kiện nhiệt độ cao; bảo quản nơi mát khi có
                    thể.</em
                  >
                </p>
              </div>

              <div class="detail-item" data-name="Missing You">
                <p>
                  <strong>Missing You</strong> là thiết kế hướng tới cảm xúc
                  lắng đọng, dùng gam màu trầm hoặc trung tính để thể hiện nỗi
                  nhớ và sự trân trọng dành cho người nhận.
                </p>

                <h3>Đặc điểm nổi bật:</h3>
                <ul>
                  <li>
                    Gam màu trung tính hoặc pastel trầm, tạo cảm giác hoài niệm.
                  </li>
                  <li>
                    Thiết kế tinh tế, sử dụng hoa phụ để tăng chiều sâu cảm xúc.
                  </li>
                </ul>

                <h3>Ý nghĩa và phù hợp cho:</h3>
                <p>
                  Missing You phù hợp khi muốn gửi lời nhớ nhung, an ủi hoặc
                  chia sẻ cảm xúc trong những lúc xa cách.
                </p>

                <h3>Hướng dẫn chăm sóc:</h3>
                <ul>
                  <li>
                    Thay nước 2-3 ngày/lần; cắt bỏ lá già để tránh ô nhiễm nước.
                  </li>
                  <li>Đặt nơi tránh gió mạnh và nhiệt độ cao.</li>
                </ul>

                <p class="note">
                  <em
                    ><strong>Lưu ý:</strong> Thiết kế này nhạy cảm với điều kiện
                    thời tiết; nên đặt trong phòng máy lạnh hoặc nơi mát nếu di
                    chuyển xa.</em
                  >
                </p>
              </div>

              <div class="detail-item" data-name="Năm Tháng">
                <p>
                  <strong>Năm Tháng</strong> mang phong cách cổ điển, thường sử
                  dụng tông màu trầm và các loại hoa có vẻ đẹp trường tồn, phù
                  hợp làm quà tặng cho người lớn tuổi hoặc dịp kỷ niệm lâu năm.
                </p>

                <h3>Đặc điểm nổi bật:</h3>
                <ul>
                  <li>
                    Phong cách cổ điển, sử dụng vật liệu và hoa truyền thống.
                  </li>
                  <li>
                    Thể hiện sự trang trọng và tôn kính, phù hợp cho dịp tri ân.
                  </li>
                </ul>

                <h3>Ý nghĩa và phù hợp cho:</h3>
                <p>
                  Năm Tháng thích hợp cho kỷ niệm lâu dài, tặng người lớn tuổi,
                  hoặc làm quà tri ân trong các dịp trang trọng.
                </p>

                <h3>Hướng dẫn chăm sóc:</h3>
                <ul>
                  <li>Đặt nơi mát, tránh ánh nắng trực tiếp.</li>
                  <li>Thay nước 2-3 ngày/lần và cắt lại phần cuống nếu cần.</li>
                </ul>

                <p class="note">
                  <em
                    ><strong>Lưu ý:</strong> Do phong cách cổ điển, có thể có
                    các phụ liệu dễ vỡ (lá khô, vật trang trí) — vận chuyển cẩn
                    thận để giữ nguyên form.</em
                  >
                </p>
              </div>

              <div class="detail-item" data-name="Yêu Thầm">
                <p>
                  <strong>Yêu Thầm</strong> là thiết kế tinh tế, nhẹ nhàng, dùng
                  gam màu nhã và bố cục kín đáo để thể hiện cảm xúc thầm lặng
                  nhưng chân thành.
                </p>

                <h3>Đặc điểm nổi bật:</h3>
                <ul>
                  <li>
                    Thiết kế kín đáo, thích hợp cho những ai muốn bày tỏ cảm xúc
                    một cách tinh tế.
                  </li>
                  <li>
                    Sử dụng hoa nhỏ, màu trung tính hoặc pastel nhẹ nhàng.
                  </li>
                </ul>

                <h3>Ý nghĩa và phù hợp cho:</h3>
                <p>
                  Yêu Thầm phù hợp cho những lời muốn dành cho người thương
                  nhưng chưa dám thổ lộ công khai — rất thích hợp cho tặng kèm
                  thiệp kín đáo.
                </p>

                <h3>Hướng dẫn chăm sóc:</h3>
                <ul>
                  <li>Tránh nhiệt độ cao; để nơi mát và tránh gió mạnh.</li>
                  <li>
                    Thay nước đều đặn và cắt chéo cuống để hoa hút nước tốt.
                  </li>
                </ul>

                <p class="note">
                  <em
                    ><strong>Lưu ý:</strong> Nếu muốn gửi thông điệp mạnh mẽ
                    hơn, có thể kết hợp Yêu Thầm với thiệp ghi lời nhắn cá
                    nhân.</em
                  >
                </p>
              </div>
              <!-- Mô tả cho các sản phẩm Hoa Sinh Nhật -->
              <div class="detail-item" data-name="Giỏ Hoa Ngày Rực Rỡ">
                <p>
                  <strong>Giỏ Hoa Ngày Rực Rỡ</strong> là một giỏ hoa sinh nhật
                  đầy màu sắc, kết hợp nhiều loại hoa tươi để tạo thành tổng thể
                  rực rỡ và bắt mắt.
                </p>
                <h3>Đặc điểm nổi bật:</h3>
                <ul>
                  <li>Thiết kế giỏ, dễ cầm và trưng bày.</li>
                  <li>
                    Kết hợp nhiều hoa khác nhau để tạo độ phong phú về màu sắc.
                  </li>
                </ul>
                <h3>Hướng dẫn chăm sóc:</h3>
                <p>Thay nước 2 ngày/lần, đặt nơi mát, tránh nắng trực tiếp.</p>
              </div>

              <div class="detail-item" data-name="Quyến Rũ">
                <p>
                  <strong>Quyến Rũ</strong> là bó hoa sinh nhật thanh lịch, sử
                  dụng tông màu trang nhã cùng bố cục hình khối tạo vẻ cứng cáp
                  và tinh tế.
                </p>
                <h3>Đặc điểm:</h3>
                <ul>
                  <li>Phù hợp tặng người lớn tuổi hoặc dịp trang trọng.</li>
                </ul>
                <h3>Chăm sóc:</h3>
                <p>Đặt nơi mát, tránh gió mạnh; thay nước 2-3 ngày/lần.</p>
              </div>

              <div class="detail-item" data-name="Red Rose">
                <p>
                  <strong>Red Rose</strong> – bó hoa đỏ truyền thống, sang
                  trọng, thường được dùng để bày tỏ tình cảm nồng nhiệt trong
                  dịp sinh nhật.
                </p>
                <h3>Đặc điểm:</h3>
                <ul>
                  <li>Hoa hồng đỏ cao cấp, bố cục đậm chất lãng mạn.</li>
                </ul>
                <h3>Chăm sóc:</h3>
                <p>
                  Thay nước hàng ngày nếu có nhiều hoa, cắt cuống mỗi 2 ngày.
                </p>
              </div>

              <div class="detail-item" data-name="Luôn Bên Em">
                <p>
                  <strong>Luôn Bên Em</strong> là mẫu nhẹ nhàng, tượng trưng cho
                  sự luôn bên cạnh và sẻ chia, phù hợp tặng người thân và bạn
                  bè.
                </p>
                <h3>Đặc điểm:</h3>
                <ul>
                  <li>Thiết kế ấm áp, sử dụng hoa tông trung tính.</li>
                </ul>
                <h3>Chăm sóc:</h3>
                <p>Thay nước thường xuyên và tránh để nơi quá nóng.</p>
              </div>

              <div class="detail-item" data-name="Màu Tình Yêu">
                <p>
                  <strong>Màu Tình Yêu</strong> – bó hoa với phối màu rực rỡ,
                  thích hợp tạo ấn tượng và không khí lễ hội trong dịp sinh
                  nhật.
                </p>
                <h3>Đặc điểm:</h3>
                <ul>
                  <li>
                    Gam màu tươi sáng, phù hợp cho buổi tiệc và trang trí.
                  </li>
                </ul>
                <h3>Chăm sóc:</h3>
                <p>
                  Đặt nơi mát, tránh ánh nắng trực tiếp; thay nước 2 ngày/lần.
                </p>
              </div>

              <div class="detail-item" data-name="Elegant">
                <p>
                  <strong>Elegant</strong> là thiết kế cao cấp, sang trọng,
                  thường dùng cho những dịp đặc biệt cần sự chỉnh chu và lịch
                  thiệp.
                </p>
                <h3>Đặc điểm:</h3>
                <ul>
                  <li>Chất liệu và phụ kiện cao cấp, bố cục tinh tế.</li>
                </ul>
                <h3>Chăm sóc:</h3>
                <p>Giữ nơi mát, tránh nhiệt độ cao; thay nước đều đặn.</p>
              </div>

              <div class="detail-item" data-name="Hương Nắng Mai">
                <p>
                  <strong>Hương Nắng Mai</strong> – thiết kế tươi sáng, lấy cảm
                  hứng từ ánh nắng buổi sáng, phù hợp cho món quà tràn đầy năng
                  lượng.
                </p>
                <h3>Đặc điểm:</h3>
                <ul>
                  <li>Màu sắc vàng/kem, tạo cảm giác ấm áp.</li>
                </ul>
                <h3>Chăm sóc:</h3>
                <p>Tránh ánh nắng trực tiếp; thay nước 2 ngày/lần.</p>
              </div>

              <div class="detail-item" data-name="Lạn Tỏa Ước Mơ">
                <p>
                  <strong>Lạn Tỏa Ước Mơ</strong> – mẫu nhẹ nhàng, lãng mạn với
                  các tone màu pastel, thích hợp cho những lời chúc mơ đẹp và hy
                  vọng.
                </p>
                <h3>Đặc điểm:</h3>
                <ul>
                  <li>Phối hợp hoa pastel, phù hợp tặng cho người trẻ.</li>
                </ul>
                <h3>Chăm sóc:</h3>
                <p>
                  Đặt nơi thoáng mát, tránh ánh nắng gắt; thay nước đều đặn.
                </p>
              </div>

              <!-- Nếu cần thêm sản phẩm khác, thêm tiếp <div class="detail-item" data-name="Tên">... -->
            </div>
          </div>
        </div>

        <script>
              // Get product info from URL parameters
              function getProductFromURL() {
                  const urlParams = new URLSearchParams(window.location.search);
                  let productName = urlParams.get('name');
                  let productPrice = urlParams.get('price');
                  let productImage = urlParams.get('image');

                  // image map fallback for common products
                  const imageMap = {
                    'Little Love': 'src/img/Little Love.webp',
                    'Ngọt Ngào': 'src/img/Ngotngao.webp',
                    'Ấm Sao': 'src/img/Anhsao.webp',
                    '100 Ngày Yêu': 'src/img/100dayiu.webp',
                    'Bó Hoa Bright Pink': 'src/img/Bó Hoa Bright Pink.webp',
                    'Missing You': 'src/img/Missing You.webp',
                    'Năm Tháng': 'src/img/Năm Tháng.webp',
                    'Yêu Thầm': 'src/img/Yêu Thầm.webp',
                    'Giỏ Hoa Ngày Rực Rỡ': 'src/img/Giohoarr.webp',
                    'Quyến Rũ': 'src/img/Quyenru.webp',
                    'Red Rose': 'src/img/Redrose.webp',
                    'Luôn Bên Em': 'src/img/Luonbenem.webp',
                    'Màu Tình Yêu': 'src/img/Mautinhyeu.webp',
                    'Elegant': 'src/img/Elegant.webp',
                    'Hương Nắng Mai': 'src/img/Huongnangmai.webp',
                    'Lạn Tỏa Ước Mơ': 'src/img/Lantoa.webp'
                  };

                  // Defaults when opened standalone without params
                  const defaults = {
                    name: 'Ấm Sao',
                    price: '790,000VND',
                    image: imageMap['Ấm Sao']
                  };

                  // If no name provided, treat as standalone view -> show default Ấm Sao
                  if (!productName) {
                    productName = defaults.name;
                  }
                  if (!productPrice) {
                    productPrice = defaults.price;
                  }
                  // if image param missing or empty, try map by name, otherwise default
                  if (!productImage || productImage.trim() === '') {
                    productImage = imageMap[productName] || defaults.image;
                  }

                  // Apply to DOM
                  if (productName) {
                    document.getElementById('productTitle').textContent = productName;
                    // Update description based on product (will show only matched block)
                    updateProductDescription(productName);
                  }
                  if (productPrice) {
                    document.getElementById('productPrice').textContent = productPrice;
                  }
                  if (productImage) {
                    document.getElementById('productImage').src = productImage;
                    document.getElementById('productImage').alt = productName || '';
                  }
              }

              // Update product description based on product name
                  function updateProductDescription(productName) {
                    const descriptions = {
                      'Little Love': 'là biểu tượng của tình yêu nhỏ bé nhưng chân thành, được tạo nên từ những bông hoa hồng mini đáng yêu.',
                      'Ngọt Ngão': 'mang đến cảm giác ấm áp và ngọt ngào như tình yêu đầu đời với những tông màu pastel dịu dàng.',
                      'Ấm Sao': 'được tạo nên từ những bông hoa hồng tươi thắm nhất, mang đến vẻ đẹp tinh tế và sang trọng.',
                      '100 Ngày Yêu': 'là món quà hoàn hảo thể hiện tình yêu bền vững với sự kết hợp harmonious của nhiều loại hoa.',
                      'Bó Hoa Bright Pink': 'nổi bật với sắc hồng rực rỡ, tạo nên điểm nhấn tươi mới và năng động.',
                      'Missing You': 'thể hiện nỗi nhớ nhung sâu sắc qua từng cánh hoa tinh tế và đầy cảm xúc.',
                      'Năm Tháng': 'ghi dấu những khoảnh khắc đáng nhớ với vẻ đẹp cổ điển và thanh lịch.',
                      'Yêu Thầm': 'thể hiện tình cảm kín đáo và sâu lắng qua màu sắc nhẹ nhàng, tinh tế.'
                    };

                      const desc = descriptions[productName];
                      const descSection = document.querySelector('#detailedContent');
                      if (descSection) {
                        // Nếu có block .detail-item tương ứng, hiển thị block đó và ẩn những block khác
                        const items = Array.from(descSection.querySelectorAll('.detail-item'));
                        if (items.length > 0) {
                          let matched = items.find(it => (it.getAttribute('data-name')||'').trim() === (productName||'').trim());
                          if (matched) {
                            items.forEach(it => it.style.display = it === matched ? '' : 'none');
                            return;
                          }
                        }
                        // fallback: nếu không có block chi tiết, dùng mapping ngắn
                        if (desc) {
                          descSection.innerHTML = `
                            <p>
                            <strong>Bó hoa "${productName}"</strong> ${desc} Phù hợp cho sinh nhật, kỷ niệm và các dịp đặc biệt.
                            </p>
                          `;
                        }
                      }
                  }

              // Quantity controls (compact, robust)
              (function () {
                let qty = 1;
                const qEl = document.getElementById('quantity');
                const btns = Array.from(document.querySelectorAll('.qty-btn'));
                const minusBtn = btns[0] || null;
                const plusBtn = btns[1] || null;

                function setQty(n) {
                  qty = Math.max(1, Number(n) || 1);
                  if (qEl) qEl.textContent = qty;
                  if (minusBtn) minusBtn.disabled = qty <= 1;
                }

                // Expose for inline handlers and other scripts
                window.changeQuantity = function (delta) {
                  setQty(qty + Number(delta || 0));
                };

                // If buttons don't use inline onclick, attach listeners once
                try {
                  if (minusBtn && !minusBtn.hasAttribute('onclick'))
                    minusBtn.addEventListener('click', function () {
                      window.changeQuantity(-1);
                    });
                  if (plusBtn && !plusBtn.hasAttribute('onclick'))
                    plusBtn.addEventListener('click', function () {
                      window.changeQuantity(1);
                    });
                } catch (e) {
                  /* ignore */
                }

                // initialize display
                setQty(qty);

                // helper for other code to read current qty
                window.getProductQuantity = function () {
                  return qty;
                };
              })();

              // Order functionality
              function orderNow() {
                  const productName = document.getElementById('productTitle').textContent;
                  const productPrice = document.getElementById('productPrice').textContent;
                  const productImage = document.getElementById('productImage').src;

                  // Parse price to number (remove VND and commas)
                  const priceNumber = parseInt(productPrice.replace(/[^\d]/g, ''));

                  // Create product object
          const quantity = parseInt((document.getElementById('quantity')||{textContent:'1'}).textContent, 10) || 1;
          const product = {
            id: productName.toLowerCase().replace(/\s+/g, '-'),
            name: productName,
            price: priceNumber,
            image: productImage,
            quantity: quantity
          };

            // If not logged in, save pending add and redirect to login
            const user = JSON.parse(localStorage.getItem('floralShopUser') || 'null');
            if (!user || !user.username) {
              // Save pending add so we can merge after login
              try {
                localStorage.setItem('floralShopPendingAdd', JSON.stringify(product));
              } catch (e) {
                console.error('Không thể lưu pending add:', e);
              }
              // Redirect to login with next return URL
              const next = encodeURIComponent(window.location.href);
              window.location.href = `dangnhap.html?next=${next}`;
              return;
            }

          // Add to cart using shared CartManager (persists per-user and shows notification)
          if (typeof cartManager !== 'undefined' && cartManager && typeof cartManager.addItem === 'function') {
            cartManager.addItem(product);
          } else {
            // Fallback: write to legacy key if CartManager isn't available
            try {
              const cart = JSON.parse(localStorage.getItem('floralShopCart') || '[]');
              const existingIndex = cart.findIndex(item => item.id === product.id);
              if (existingIndex >= 0) cart[existingIndex].quantity += product.quantity;
              else cart.push(product);
              localStorage.setItem('floralShopCart', JSON.stringify(cart));
              // show a local notification as fallback
              showAddToCartNotification(product.name, product.quantity);
            } catch (e) {
              console.error('Fallback addToCart failed:', e);
            }
          }

                  // Button animation
                  const btn = document.querySelector('.main-order-btn');
                  btn.style.transform = 'scale(0.95)';
                  btn.innerHTML = '<i class="fas fa-check"></i> ĐÃ THÊM VÀO GIỎ!';

                  setTimeout(() => {
                      btn.style.transform = '';
                      btn.innerHTML = '<i class="fas fa-shopping-cart"></i> ĐẶT HOA NGAY';
                  }, 2000);
              }

              // Note: cart updates use the shared CartManager (cart.js) via cartManager.addItem(product)

              // Show add to cart notification
              function showAddToCartNotification(productName, quantity) {
                  const notification = document.createElement('div');
                  notification.innerHTML = `
                      <i class="fas fa-check-circle" style="margin-right: 8px;"></i>
                      Đã thêm ${quantity} "${productName}" vào giỏ hàng!
                  `;
                  notification.style.cssText = `
                      position: fixed;
                      top: 20px;
                      right: 20px;
                      background: linear-gradient(135deg, #00b4a6, #4fd1c7);
                      color: white;
                      padding: 15px 20px;
                      border-radius: 10px;
                      box-shadow: 0 8px 25px rgba(0, 180, 166, 0.3);
                      z-index: 10000;
                      font-weight: 700;
                      font-size: 14px;
                      transform: translateX(100%);
                      transition: transform 0.3s ease;
                  `;

                  document.body.appendChild(notification);

                  // Slide in
                  setTimeout(() => {
                      notification.style.transform = 'translateX(0)';
                  }, 100);

                  // Slide out after 3 seconds
                  setTimeout(() => {
                      notification.style.transform = 'translateX(100%)';
                      setTimeout(() => {
                          if (notification.parentNode) {
                              notification.parentNode.removeChild(notification);
                          }
                      }, 300);
                  }, 3000);
              }          // Initialize page
              document.addEventListener('DOMContentLoaded', function() {
                  getProductFromURL();
              });

              // Go back to products section on index page
              function goBackToProducts() {
                  window.location.href = 'index.html#products';
              }
        </script>
      </div>
      <!-- End modal-container -->
    </div>
    <!-- End modal-overlay -->
  </body>
</html>
